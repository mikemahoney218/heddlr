<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic R Markdown Document Generation • heddlr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Dynamic R Markdown Document Generation">
<meta property="og:description" content="Helper functions designed to make
    dynamically generating R Markdown documents easier by providing a
    simple and tidy way to create report pieces, shape them to your data,
    and combine them for exporting into a single R Markdown document.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">heddlr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/modular-reporting-with-heddlr.html">Modular Reporting with heddlr</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="heddlr-literate-programming-extensions-for-dynamic-r-markdown-documents" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#heddlr-literate-programming-extensions-for-dynamic-r-markdown-documents" class="anchor"></a><code>heddlr</code>: Literate programming extensions for dynamic R Markdown documents</h1></div>
<!-- badges: start -->
<p><a href="https://travis-ci.com/mikemahoney218/heddlr"><img src="https://travis-ci.com/mikemahoney218/heddlr.svg?branch=master" alt="Travis CI Status"></a> <a href="https://codecov.io/gh/mikemahoney218/heddlr?branch=master"><img src="https://codecov.io/gh/mikemahoney218/heddlr/branch/master/graph/badge.svg" alt="Codecov Coverage"></a> <a href="https://www.tidyverse.org/lifecycle/"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Package lifecycle"></a> <img src="https://www.r-pkg.org/badges/version/heddlr" alt="CRAN version"><!-- badges: end --></p>
<div id="what" class="section level2">
<h2 class="hasAnchor">
<a href="#what" class="anchor"></a>What</h2>
<p><a href="https://github.com/rstudio/rmarkdown">R Markdown</a> is one of the coolest parts of the Tidyverse, making it trivial to create professional-looking HTML and PDF documents using simple markdown language. <code>heddlr</code> looks to extend that functionality by making it easier to dynamically piece together documents by intelligently using your data to combine defined components into a cohesive whole, leading to cleaner code and faster creation of reports that have many repeating pieces or dashboards which need to respond to changes in their data sources.</p>
</div>
<div id="why" class="section level2">
<h2 class="hasAnchor">
<a href="#why" class="anchor"></a>Why</h2>
<p>R Markdown is already fantastic at creating reports where each part can efficiently be defined explicitly, thanks to how easily it combines Markdown and R code.</p>
<p>However, sometimes cases arise where it isn’t practical to script out every inch of a report. For instance, reports which repeat the same sections over and over again with different subsets of the data, common when each grouping needs its own Markdown headers, can quickly become hundreds or thousands of lines long, depending on the number of groups involved. Similarly, if the list of groups included in the report will change over time it makes sense to automate away the work of updating the dashboard, making mistakes less likely and freeing up resources for more valuable work.</p>
<p>In the past, my solution for these sorts of problems has been to hard-code dashboard generation into a separate R script, spending time to make a new framework that was only applicable to that report before it was time to start in on the next one. I’ve started to believe that this process can and should be generalized out to all reports with changing or repeating sections. <code>heddlr</code> is my attempt to scratch that itch.</p>
</div>
<div id="how" class="section level2">
<h2 class="hasAnchor">
<a href="#how" class="anchor"></a>How</h2>
<p>This document describes how the package will work by v0.5.0. As such, not all of the below is implemented yet – for more information, check out <a href="https://github.com/mikemahoney218/heddlr/issues/1">The Road to 0.5.0</a>.</p>
<div id="reports-are-composed-of-patterns" class="section level3">
<h3 class="hasAnchor">
<a href="#reports-are-composed-of-patterns" class="anchor"></a>Reports are composed of patterns</h3>
<p>As discussed earlier, <code>heddlr</code> is designed to make it easier to deal with reports with repeating sections that only differ in the data they describe. The first step in that process is to break those sections apart into modular units that we’re able to manipulate. In <code>heddlr</code> terminology, those sections are referred to as <em>patterns</em>.</p>
<p>A pattern is a chunk of an R Markdown document that contains all the code and Markdown that makes up a single “section”, in a format that can be repeated with only specific keywords and data points changing. This is the atomic unit of the <code>heddlr</code> package – we rarely ever want to operate on something smaller than a pattern, and most of our functions deal either with creating or manipulating patterns into larger pieces.</p>
<p>Most patterns contain three key components:</p>
<ul>
<li>Markdown, which structures your report and provides context to the code</li>
<li>Code chunks, which create the outputs your report is designed to produce</li>
<li>Placeholder keywords, which are the only pieces changing between each repetition of the pattern</li>
</ul>
<p>These components are all defined by the user – <code>heddlr</code> only cares about the patterns themselves. In order to work with them, <code>heddlr</code> will provide three pattern import functions:</p>
<ul>
<li>
<code>import_pattern</code> is a wrapper for<code><a href="https://rdrr.io/r/base/readChar.html">readChar(file, file.info(file)$size)</a></code>, allowing users to import patterns saved as standalone .Rmd documents as R objects</li>
<li>
<code>assemble_draft</code> uses <code>import_pattern</code> to pull all your patterns into a single list object (called a <code>draft</code> internally), which can help simplify some other <code>heddlr</code> functionality</li>
<li>
<code>extract_pattern</code> retrieves multiple patterns from a single file, letting you keep a single file containing each unit of your report to make testing and development easier</li>
</ul>
<p>Reports are rarely composed of exclusively repeating sections, however. Much more common is for reports to have an amount of introduction and conclusion surrounding the repeating body. These sections are dealt with by <code>heddlr</code> exactly the same as repeating patterns – they’re just understood to be patterns which repeat 0 times. While most of these patterns can be imported using the above functions, <code>heddlr</code> also includes a few tools for creating special cases:</p>
<ul>
<li>
<code>create_yaml_header</code> is a utility for turning deeply-nested lists into YAML headers for your .Rmd document. This can be a big pain when working with <code>extract_pattern</code>, which doesn’t understand how to include YAML headers as a pattern.</li>
</ul>
</div>
<div id="patterns-combine-into-a-template" class="section level3">
<h3 class="hasAnchor">
<a href="#patterns-combine-into-a-template" class="anchor"></a>Patterns combine into a template</h3>
<p>Once our report components exist as R objects, it’s time to actually piece them together correctly to form a report. This is where we create what <code>heddlr</code> calls a <em>template</em>, made up of a combination of patterns repeated based on our data inputs.</p>
<ul>
<li>
<code>heddle</code> replaces placeholder keywords with actual arguments from your data and repeats patterns to represent each piece of data you tell it about. More complex patterns can be made by telling <code>heddle</code> to replace keywords with other <code>heddle</code> template outputs, allowing nested repetition.</li>
<li>
<code>make_template</code> takes outputs from <code>heddle</code> and combines them linearly into a single template file.</li>
</ul>
</div>
<div id="templates-are-spun-into-r-markdown" class="section level3">
<h3 class="hasAnchor">
<a href="#templates-are-spun-into-r-markdown" class="anchor"></a>Templates are spun into R Markdown</h3>
<p>Once we’re satisfied with our final template, we can export it into a separate .Rmd document, which we can either manually edit further or render for our final output.</p>
<ul>
<li>
<code>export_template</code> is a wrapper around <code>writeLines</code> which takes either the output of <code>make_template</code> or several <code>heddle</code> templates and turns it into a .Rmd file.</li>
</ul>
</div>
<div id="markdown-is-rendered-into-reports" class="section level3">
<h3 class="hasAnchor">
<a href="#markdown-is-rendered-into-reports" class="anchor"></a>Markdown is rendered into reports</h3>
<p>At this point, <code>heddlr</code> has created a separate .Rmd file to generate your report. Like any other R Markdown document, you can use <code><a href="https://rdrr.io/pkg/rmarkdown/man/render.html">rmarkdown::render</a></code> to create your final output, or you can use some helper functions provided by <code>heddlr</code> to create your report.</p>
<ul>
<li>
<code>use_parameters</code> is a simpler way to pass parameter arguments to <code><a href="https://rdrr.io/pkg/rmarkdown/man/render.html">rmarkdown::render</a></code>, automatically including the <code>params</code> flag in your YAML header and including a chunk to move your inputs from <code>params$input</code> back to the names you provided.</li>
</ul>
</div>
<div id="heddlr-is-content-agnostic" class="section level3">
<h3 class="hasAnchor">
<a href="#heddlr-is-content-agnostic" class="anchor"></a><code>heddlr</code> is content agnostic</h3>
<p>At no point in this process does <code>heddlr</code> mandate any naming conventions, require you to use <code>heddlr</code> tools and processes, or care about what it is you’re producing. Every R Markdown extension should be compatible with <code>heddlr</code>, because <code>heddlr</code> just doesn’t care what your end result will look like – its only goal is to make it easier for you to get there.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael Mahoney <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0003-2402-304X" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Michael Mahoney.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
